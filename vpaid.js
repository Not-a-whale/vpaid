!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.AdPartnerCreative=e():t.AdPartnerCreative=e()}(self,(function(){return(()=>{var VpaidVideoPlayer=function(){this.slot_=null,this.videoSlot_=null,this.eventsCallbacks_={},this.loadedTime_=(new Date).getTime(),this.attributes_={companions:"",desiredBitrate:256,duration:10,expanded:!1,height:0,icons:"",linear:!0,remainingTime:10,skippableState:!1,viewMode:"normal",width:0,volume:1},this.quartileEvents_=[{event:"AdImpression",value:0},{event:"AdVideoStart",value:0},{event:"AdVideoFirstQuartile",value:25},{event:"AdVideoMidpoint",value:50},{event:"AdVideoThirdQuartile",value:75},{event:"AdVideoComplete",value:99}],this.nextQuartileIndex_=0,this.videoFormat_={Format:"",Url:"",Width:0,Height:0,BitRate:0},this.customEvent={event:"",link:""},this.vpaidData={vpaid_events:[this.customEvent]},this.currentVideo_=this.videoFormat_,this.parameters_={duration:0,videos:{HD:this.videoFormat_,MSD:this.videoFormat_,SD:this.videoFormat_},vpaid_data:this.vpaidData,click_url:""}};VpaidVideoPlayer.prototype.handshakeVersion=function(t){return"2.0"},VpaidVideoPlayer.prototype.initAd=function(t,e,i,n,o,r){this.attributes_.width=t,this.attributes_.height=e,this.attributes_.viewMode=i,this.attributes_.desiredBitrate=n,this.slot_=r.slot,this.videoSlot_=r.videoSlot,this.parameters_=JSON.parse(o.AdParameters),this.selectVideo_(),this.updateVideoSlot_(),this.initOVV(),this.videoSlot_.addEventListener("timeupdate",this.timeUpdateHandler_.bind(this),!1),this.videoSlot_.addEventListener("loadedmetadata",this.loadedMetadata_.bind(this),!1),this.videoSlot_.addEventListener("ended",this.stopAd.bind(this),!1),this.slot_.addEventListener("click",this.clickAd_.bind(this),!1),this.callEvent_("AdLoaded"),this.subscribeCustomEvents_(),this.callCustomEvents_()},VpaidVideoPlayer.prototype.initOVV=function(){var t=new OVV;for(var e in window.$ovv=window.$ovv||t,t)$ovv.hasOwnProperty(e)||($ovv[e]=t[e]);var i=new OVVAsset("OVVID",{geometryViewabilityCalculator:new OVVGeometryViewabilityCalculator},this.slot_);window.$ovv.addAsset(i)},VpaidVideoPlayer.prototype.subscribeCustomEvents_=function(){this.subscribe(this.vb_iab1,"vb_iab1",this),this.subscribe(this.vb_iab2,"vb_iab2",this)},VpaidVideoPlayer.prototype.callCustomEvents_=function(){this.callEvent_("vb_iab1"),this.callEvent_("vb_iab2")},VpaidVideoPlayer.prototype.isValidTime=function(t){return(new Date).getTime()-this.loadedTime_>=t},VpaidVideoPlayer.prototype.vb_iab1_time_counter=0,VpaidVideoPlayer.prototype.vb_iab1=function(){if(this.isViewable()){if(VpaidVideoPlayer.prototype.vb_iab1_time_counter>=1e3)return void this.httpGet(this.getEventByKey("vb_iab1"));VpaidVideoPlayer.prototype.vb_iab1_time_counter+=50,window.setTimeout(function(){this.vb_iab1()}.bind(this),50)}else VpaidVideoPlayer.prototype.vb_iab1_time_counter=0,window.setTimeout(function(){this.vb_iab1()}.bind(this),50)},VpaidVideoPlayer.prototype.vb_iab2_time_counter=0,VpaidVideoPlayer.prototype.vb_iab2=function(){if(this.isValidTime(2e3)&&this.isViewable()){if(VpaidVideoPlayer.prototype.vb_iab2_time_counter>=2e3)return void this.httpGet(this.getEventByKey("vb_iab2"));VpaidVideoPlayer.prototype.vb_iab2_time_counter+=50,window.setTimeout(function(){this.vb_iab2()}.bind(this),50)}else VpaidVideoPlayer.prototype.vb_iab2_time_counter=0,window.setTimeout(function(){this.vb_iab2()}.bind(this),50)},VpaidVideoPlayer.prototype.isPlaying=function(){return this.videoSlot_.currentTime>0&&!this.videoSlot_.paused&&!this.videoSlot_.ended},VpaidVideoPlayer.prototype.isViewable=function(){return $ovv.asset.checkViewability().viewabilityState===OVVCheck.VIEWABLE},VpaidVideoPlayer.prototype.getEventByKey=function(t){for(var e=0;e<this.parameters_.vpaid_data.vpaid_events.length;e++)if(this.parameters_.vpaid_data.vpaid_events[e].event===t)return this.parameters_.vpaid_data.vpaid_events[e]},VpaidVideoPlayer.prototype.httpGet=function(t){var e=new XMLHttpRequest;e.open("GET",t.link,!0),e.send(null)},VpaidVideoPlayer.prototype.clickAd_=function(){this.httpGet(this.getEventByKey("click")),window.open(this.parameters_.vpaid_data.click_url,"_blank"),this.callEvent_("AdClickThru")},VpaidVideoPlayer.prototype.loadedMetadata_=function(){this.attributes_.duration=this.videoSlot_.duration,this.callEvent_("AdDurationChange")},VpaidVideoPlayer.prototype.timeUpdateHandler_=function(){if(!(this.nextQuartileIndex_>=this.quartileEvents_.length)){if(100*this.videoSlot_.currentTime/this.videoSlot_.duration>=this.quartileEvents_[this.nextQuartileIndex_].value){var t=this.quartileEvents_[this.nextQuartileIndex_].event;void 0===this.eventsCallbacks_[t]&&"AdImpression"===t||this.eventsCallbacks_[t](),this.nextQuartileIndex_+=1}this.videoSlot_.duration>0&&(this.attributes_.remainingTime=this.videoSlot_.duration-this.videoSlot_.currentTime)}},VpaidVideoPlayer.prototype.updateVideoSlot_=function(){null==this.videoSlot_&&(this.videoSlot_=document.createElement("video"),this.slot_.appendChild(this.videoSlot_)),this.updateVideoPlayerSize_(),this.videoSlot_.setAttribute("src",this.currentVideo_.Url)},VpaidVideoPlayer.prototype.selectVideo_=function(){this.getAdWidth()<480?this.setCurrentVideo_("MSD"):this.getAdWidth()<960?this.setCurrentVideo_("SD"):this.setCurrentVideo_("HD")},VpaidVideoPlayer.prototype.setCurrentVideo_=function(t){this.currentVideo_=this.parameters_.videos[t]},VpaidVideoPlayer.prototype.updateVideoPlayerSize_=function(){this.videoSlot_.setAttribute("width",this.attributes_.width),this.videoSlot_.setAttribute("height",this.attributes_.height)},VpaidVideoPlayer.prototype.startAd=function(){this.videoSlot_.play(),this.callEvent_("AdStarted")},VpaidVideoPlayer.prototype.stopAd=function(){var t=this.callEvent_.bind(this);setTimeout(t,75,["AdStopped"])},VpaidVideoPlayer.prototype.resizeAd=function(t,e,i){this.attributes_.width=t,this.attributes_.height=e,this.attributes_.viewMode=i,this.updateVideoPlayerSize_(),this.callEvent_("AdSizeChange")},VpaidVideoPlayer.prototype.pauseAd=function(){this.videoSlot_.pause(),this.callEvent_("AdPaused")},VpaidVideoPlayer.prototype.resumeAd=function(){this.videoSlot_.play(),this.callEvent_("AdPlaying")},VpaidVideoPlayer.prototype.expandAd=function(){this.attributes_.expanded=!0,this.callEvent_("AdExpanded")},VpaidVideoPlayer.prototype.collapseAd=function(){this.attributes_.expanded=!1},VpaidVideoPlayer.prototype.skipAd=function(){this.attributes_.skippableState&&this.callEvent_("AdSkipped")},VpaidVideoPlayer.prototype.subscribe=function(t,e,i){var n=t.bind(i);this.eventsCallbacks_[e]=n},VpaidVideoPlayer.prototype.unsubscribe=function(t){this.eventsCallbacks_[t]=null},VpaidVideoPlayer.prototype.getAdLinear=function(){return this.attributes_.linear},VpaidVideoPlayer.prototype.getAdWidth=function(){return this.attributes_.width},VpaidVideoPlayer.prototype.getAdHeight=function(){return this.attributes_.height},VpaidVideoPlayer.prototype.getAdExpanded=function(){return this.attributes_.expanded},VpaidVideoPlayer.prototype.getAdSkippableState=function(){return this.attributes_.skippableState},VpaidVideoPlayer.prototype.getAdRemainingTime=function(){return this.attributes_.remainingTime},VpaidVideoPlayer.prototype.getAdDuration=function(){return this.attributes_.duration},VpaidVideoPlayer.prototype.getAdVolume=function(){return this.attributes_.volume},VpaidVideoPlayer.prototype.setAdVolume=function(t){this.attributes_.volume=t,this.callEvent_("AdVolumeChange")},VpaidVideoPlayer.prototype.getAdCompanions=function(){return this.attributes_.companions},VpaidVideoPlayer.prototype.getAdIcons=function(){return this.attributes_.icons},VpaidVideoPlayer.prototype.log=function(t){console.log(t)},VpaidVideoPlayer.prototype.callEvent_=function(t){t in this.eventsCallbacks_&&this.eventsCallbacks_[t]()};function OVV(){this.DEBUG=!1,this.asset=null,this.positionInterval,this.userAgent=window.testOvvConfig&&window.testOvvConfig.userAgent?window.testOvvConfig.userAgent:navigator.userAgent,this.servingScenarioEnum={OnPage:1,SameDomainIframe:2,CrossDomainIframe:3},this.intersectionObserverSupported=!!window.IntersectionObserver,this.servingScenario=function(t){try{if(window.top==window)return t.OnPage;for(var e=window;e.parent!=e;){if(e.parent.document.domain!=e.document.domain)return t.CrossDomainIframe;e=e.parent}return t.SameDomainIframe}catch(t){}return t.CrossDomainIframe}(this.servingScenarioEnum),this.IN_IFRAME=this.servingScenario!=this.servingScenarioEnum.OnPage,this.IN_XD_IFRAME=this.servingScenario==this.servingScenarioEnum.CrossDomainIframe,this.geometrySupported=!this.IN_XD_IFRAME;var t=new OVVBrowser(this.userAgent);this.browser=t.getBrowser(),this.browserIDEnum=t.getBrowserIDEnum(),this.interval=1,this.releaseVersion="OVVRELEASEVERSION",this.buildVersion="OVVBUILDVERSION";var e={},i=[],n=[];this.addAsset=function(t){e.hasOwnProperty(t.getId())||(e[t.getId()]=t,this.asset=t)},this.removeAsset=function(t){delete e[t.getId()]},this.getAssetById=function(t){return e[t]},this.getAds=function(){var t={};for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},this.subscribe=function(t,e,o,r){if(r)for(key in i[e])i[e][key]&&contains(i[e][key].eventName,t)&&runSafely((function(){o(e,i[e][key])}));for(key in t)n[t[key]+e]||(n[t[key]+e]=[]),n[t[key]+e].push({Func:o})},this.publish=function(t,e,o){var r={eventName:t,eventTime:getCurrentTime(),ovvArgs:o};if(i[e]||(i[e]=[]),i[e].length<1e3&&i[e].push(r),t&&e&&n[t+e]instanceof Array)for(var a=0;a<n[t+e].length;a++){var s=n[t+e][a];s&&s.Func&&"function"==typeof s.Func&&runSafely((function(){s.Func(e,r)}))}},this.getAllReceivedEvents=function(t){return i[t]},this.getViewPortSize=function(t){var e={width:1/0,height:1/0,area:1/0};return!isNaN(t.document.body.clientWidth)&&t.document.body.clientWidth>0&&(e.width=t.document.body.clientWidth),!isNaN(t.document.body.clientHeight)&&t.document.body.clientHeight>0&&(e.height=t.document.body.clientHeight),t.document.documentElement&&t.document.documentElement.clientWidth&&!isNaN(t.document.documentElement.clientWidth)&&(e.width=t.document.documentElement.clientWidth),t.document.documentElement&&t.document.documentElement.clientHeight&&!isNaN(t.document.documentElement.clientHeight)&&(e.height=t.document.documentElement.clientHeight),t.innerWidth&&!isNaN(t.innerWidth)&&(e.width=Math.min(e.width,t.innerWidth)),t.innerHeight&&!isNaN(t.innerHeight)&&(e.height=Math.min(e.height,t.innerHeight)),e.area=e.height*e.width,e};var getCurrentTime=function(){"use strict";return Date.now?Date.now():(new Date).getTime()},contains=function(t,e){for(var i=0;i<e.length;i++)if(e[i]===t)return!0;return!1},runSafely=function(t){try{var e=t();return void 0===e||e}catch(t){return!1}}}function OVVCheck(){this.clientHeight=-1,this.clientWidth=-1,this.error="",this.focus=null,this.fps=-1,this.id="",this.beaconsSupported=null,this.geometrySupported=null,this.geometryViewabilityState="",this.beaconViewabilityState="",this.cssViewabilityState="",this.domViewabilityState="",this.technique="",this.beacons=new Array,this.inIframe=null,this.objBottom=-1,this.objLeft=-1,this.objRight=-1,this.objTop=-1,this.percentViewable=-1,this.percentObscured=0,this.viewabilityState=""}function OVVBrowser(t){var e={MSIE:1,Firefox:2,Chrome:3,Opera:4,safari:5};var i,n,o,r=(i=t,n="(Windows NT )",o=[{id:4,name:"Opera",brRegex:"OPR|Opera",verRegex:"(OPR/|Version/)"},{id:1,name:"MSIE",brRegex:"MSIE|Trident/7.*rv:11|rv:11.*Trident/7",verRegex:"(MSIE |rv:)"},{id:2,name:"Firefox",brRegex:"Firefox",verRegex:"Firefox/"},{id:3,name:"Chrome",brRegex:"Chrome",verRegex:"Chrome/"},{id:5,name:"Safari",brRegex:"Safari|(OS |OS X )[0-9].*AppleWebKit",verRegex:"Version/"}],function(){for(var t={ID:0,name:"",version:""},e=i,r=0;r<o.length;r++)if(null!=e.match(new RegExp(o[r].brRegex))){if(t.ID=o[r].id,t.name=o[r].name,null==o[r].verRegex)break;var a=e.match(new RegExp(o[r].verRegex+"[0-9]*"));if(null!=a){var s=a[0].match(new RegExp(o[r].verRegex));t.version=a[0].replace(s[0],"")}var d=e.match(new RegExp(n+"[0-9\\.]*"));null!=d&&(t.os=d[0]);break}return t}());this.getBrowser=function(){return r},this.getBrowserIDEnum=function(){return e}}function OVVBeaconSupportCheck(){var t=new OVVBrowser($ovv.userAgent),e=t.getBrowser(),i=t.getBrowserIDEnum();this.supportsBeacons=function(){var t=e.ID==i.MSIE,n=e.version>=11,o=e.os?e.os.split(" "):[0],r=o[o.length-1];return!t||n&&r>=6.3}}function OVVAsset(t,e,i){var n,o,r=13,a=Math.sqrt(2),s=t,d=0,u=$ovv.DEBUG?20:1,h=e.geometryViewabilityCalculator,getBeaconFunc=function(){return null},getBeaconContainerFunc=function(){return null},c=new OVVBeaconSupportCheck;this.checkViewability=function(){var t=new OVVCheck;if(t.id=s,t.inIframe=$ovv.IN_IFRAME,t.geometrySupported=$ovv.geometrySupported,t.focus=isInFocus(),!i)return t.error="Player not found!",t;if($ovv.intersectionObserverSupported)return t.technique=OVVCheck.INTERSECTIONOBSERVER,checkIntersectionObserver(t,i),t.viewabilityState=t.percentViewable>=50?OVVCheck.VIEWABLE:OVVCheck.UNVIEWABLE,t;if(!0===checkCssInvisibility(t,i)){if(!$ovv.DEBUG)return t;t.cssViewabilityState=OVVCheck.UNVIEWABLE}if(!0===checkDomObscuring(t,i)){if(!$ovv.DEBUG)return t;t.domViewabilityState=OVVCheck.UNVIEWABLE}if(!c.supportsBeacons()&&!1===t.geometrySupported&&(t.viewabilityState=OVVCheck.UNMEASURABLE,!$ovv.DEBUG))return t;if(t.geometrySupported){if(t.technique=OVVCheck.GEOMETRY,checkGeometry(t,i),t.viewabilityState=t.percentViewable>=50?OVVCheck.VIEWABLE:OVVCheck.UNVIEWABLE,!$ovv.DEBUG)return t;t.geometryViewabilityState=t.viewabilityState}var e=l(0),n=v(0);if(e&&e.isViewable&&n){var o=isOnScreen(n)&&e.isViewable();t.beaconsSupported=!o}else t.beaconsSupported=!1;if(beaconsReady())if(t.beaconsSupported){t.technique=OVVCheck.BEACON;var r=checkBeacons(t);null===r?(t.viewabilityState=OVVCheck.UNMEASURABLE,$ovv.DEBUG&&(t.beaconViewabilityState=OVVCheck.UNMEASURABLE)):(t.viewabilityState=r?OVVCheck.VIEWABLE:OVVCheck.UNVIEWABLE,$ovv.DEBUG&&(t.beaconViewabilityState=r?OVVCheck.VIEWABLE:OVVCheck.UNVIEWABLE))}else t.viewabilityState=OVVCheck.UNMEASURABLE;else t.technique=OVVCheck.BEACON,t.viewabilityState=OVVCheck.NOT_READY;if($ovv.DEBUG)if(t.technique="",null===t.geometryViewabilityState&&null===t.beaconViewabilityState)t.viewabilityState=OVVCheck.UNMEASURABLE;else{var a=t.beaconViewabilityState===OVVCheck.VIEWABLE,d=t.cssViewabilityState===OVVCheck.VIEWABLE,u=t.domViewabilityState===OVVCheck.VIEWABLE,h=t.geometryViewabilityState===OVVCheck.VIEWABLE;t.viewabilityState=d||u||a||h?OVVCheck.VIEWABLE:OVVCheck.UNVIEWABLE}return t},this.beaconStarted=function(e){$ovv.DEBUG&&l(e).debug&&l(e).debug(),0!==e&&(d++,beaconsReady()&&i["onJsReady"+t]())},this.dispose=function(){for(var t=1;t<=r;t++){var e=v(t);e&&(delete d[t],e.parentElement.removeChild(e))}clearInterval(window.$ovv.positionInterval),window.$ovv.removeAsset(this)},this.getId=function(){return s};var checkCssInvisibility=function(t,e){var i=window.getComputedStyle(e,null),n=i.getPropertyValue("visibility"),o=i.getPropertyValue("display");return("hidden"==n||"none"==o)&&(t.technique=OVVCheck.CSS_INVISIBILITY,t.viewabilityState=OVVCheck.UNVIEWABLE,!0)},checkDomObscuring=function(t,e){var i=e.getBoundingClientRect(),n=i.left+12,o=i.right-12,r=i.top+12,a=i.bottom-12,s=Math.floor(i.left+i.width/2),d=Math.floor(i.top+i.height/2),u=[{x:n,y:r},{x:s,y:r},{x:o,y:r},{x:n,y:d},{x:s,y:d},{x:o,y:d},{x:n,y:a},{x:s,y:a},{x:o,y:a}];for(var h in u)if(u[h]&&u[h].x>=0&&u[h].y>=0&&(elem=document.elementFromPoint(u[h].x,u[h].y),null!=elem&&elem!=e&&!e.contains(elem)&&(overlappingArea=overlapping(i,elem.getBoundingClientRect()),overlappingArea>0&&(t.percentObscured=100*overlapping(i,elem.getBoundingClientRect()),t.percentObscured>50))))return t.percentViewable=100-t.percentObscured,t.technique=OVVCheck.DOM_OBSCURING,t.viewabilityState=OVVCheck.UNVIEWABLE,!0;return!1},overlapping=function(t,e){var i=t.width*t.height;return Math.max(0,Math.min(t.right,e.right)-Math.max(t.left,e.left))*Math.max(0,Math.min(t.bottom,e.bottom)-Math.max(t.top,e.top))/i},checkGeometry=function(t,e){t.percentObscured=t.percentObscured||0;var i=h.getViewabilityState(e,window);return i.error||(t.clientWidth=i.clientWidth,t.clientHeight=i.clientHeight,t.percentViewable=i.percentViewable-t.percentObscured,t.objTop=i.objTop,t.objBottom=i.objBottom,t.objLeft=i.objLeft,t.objRight=i.objRight),i},checkBeacons=function(t){if(!beaconsReady())return null;var e=0,n=0,o=0,a=0;t.beacons=new Array(r);var s=i.getClientRects?i.getClientRects()[0]:{top:-1,bottom:-1,left:-1,right:-1};t.objTop=s.top,t.objBottom=s.bottom,t.objLeft=s.left,t.objRight=s.right;for(var d=0;d<=r;d++)if(0!==d){var u=l(d),h=v(d),c=u.isViewable(),p=isOnScreen(h);if(t.beacons[d]=c&&p,c)switch(e++,d){case 2:case 3:case 4:case 5:n++;break;case 6:case 7:case 8:case 9:o++;break;case 10:case 11:case 12:case 13:a++}}if(e===r)return!0;var b=t.beacons;return!1===b[1]?(a>=3||o>=3||n>=3)&&null:!0===b[1]&&(!0===b[2]&&!0===b[3]||!0===b[2]&&!0===b[4]||!0===b[3]&&!0===b[5]||!0===b[4]&&!0===b[5])||(!0===b[1]&&4==o||(!b[2]||!b[5]||b[6]&&b[10]&&b[1]&&b[13]&&b[9]?!(!b[4]||!b[3]||b[8]&&b[12]&&b[1]&&b[11]&&b[7])&&null:null))},checkIntersectionObserver=function(t,e){t.percentViewable=o.percentViewable;var i=e.getClientRects?e.getClientRects()[0]:{top:-1,bottom:-1,left:-1,right:-1};if(t.objTop=i.top,t.objBottom=i.bottom,t.objLeft=i.left,t.objRight=i.right,t.geometrySupported){var n=$ovv.getViewPortSize(window);t.clientWidth=n.width,t.clientHeight=n.height}},beaconsReady=function(){return!!i&&d===r},positionBeacons=function(){if(beaconsReady()){var t=i.getClientRects()[0];if(!n||!t||n.left!==t.left||n.right!==t.right||n.top!==t.top||n.bottom!==t.bottom){n=t;for(var e=t.right-t.left,o=t.bottom-t.top,s=e/(1+a),d=o/(1+a),h=e/a,c=o/a,l=0;l<=r;l++){var p=Math.round(5*Math.random()),b=t.left+document.body.scrollLeft,m=t.top+document.body.scrollTop;switch(l){case 0:b=-1e5,m=-1e5;break;case 1:b+=(e-u)/2+p,m+=(o-u)/2+p;break;case 2:b+=p,m+=p;break;case 3:m+=p,b+=e-u-p;break;case 4:b+=p,m+=o-u-p;break;case 5:b+=e-u-p,m+=o-u-p;break;case 6:b+=(e-h)/2+p,m+=(o-c)/2+p;break;case 7:b+=(e-h)/2+h-p,m+=(o-c)/2+p;break;case 8:b+=(e-h)/2+p,m+=(o-c)/2+c-p;break;case 9:b+=(e-h)/2+h-p,m+=(o-c)/2+c-p;break;case 10:b+=(e-s)/2+p,m+=(o-d)/2+p;break;case 11:b+=(e-s)/2+s-p,m+=(o-d)/2+p;break;case 12:b+=(e-s)/2+p,m+=(o-d)/2+d-p;break;case 13:b+=(e-s)/2+s-p,m+=(o-d)/2+d-p}l>=6&&(b-=u/2,m-=u/2),b=Math.round(b),m=Math.round(m);var f=v(l);f.style.left=b+"px",f.style.top=m+"px"}}}},isOnScreen=function(t){if(!t)return!1;var e=Math.max(document.body.clientWidth,window.innerWidth),i=Math.max(document.body.clientHeight,window.innerHeight),n=t.getClientRects()[0];return n.top<i&&n.bottom>0&&n.left<e&&n.right>0},l=function(t){return getBeaconFunc(t)}.memoize(),v=function(t){return getBeaconContainerFunc(t)}.memoize(),isInFocus=function(){return("undefined"===document.hidden||!0!==document.hidden)&&(!!$ovv.IN_XD_IFRAME||(!window.top.document.hasFocus||window.top.document.hasFocus()))};$ovv.intersectionObserverSupported?(o=new OVVIntersectionObserverViewabilityMonitor,i&&(o.beginMonitoring(i),i["onJsReady"+t]&&setTimeout((function(){i["onJsReady"+t]()}),5))):0==$ovv.geometrySupported||$ovv.DEBUG?$ovv.browser.ID===$ovv.browserIDEnum.Firefox?(getBeaconFunc=function(t){var e=document.getElementById("OVVFrame_"+s+"_"+t),i=null;return e&&(i=e.contentWindow),i},getBeaconContainerFunc=function(t){return document.getElementById("OVVFrame_"+s+"_"+t)},function(){for(var t=0;t<=r;t++){var e=document.createElement("iframe");e.name=e.id="OVVFrame_"+s+"_"+t,e.width=$ovv.DEBUG?20:1,e.height=$ovv.DEBUG?20:1,e.frameBorder=0,e.style.position="absolute",e.style.zIndex=$ovv.DEBUG?99999:-99999,e.src="javascript: window.isInViewArea = undefined; window.wasInViewArea = false; window.isInView = undefined; window.wasViewed = false; window.started = false; window.index = "+t+';window.isViewable = function() { return window.isInView; }; var cnt = 0; setTimeout(function() {var span = document.createElement("span");span.id = "ad1";document.body.insertBefore(span, document.body.firstChild);},300);setTimeout(function() {setInterval(function() { ad1 = document.getElementById("ad1");ad1.innerHTML = window.mozPaintCount > cnt ? "In View" : "Out of View";var paintCount = window.mozPaintCount; window.isInView = (paintCount>cnt); cnt = paintCount; if (parent.$ovv.DEBUG == true) {if(window.isInView === true){document.body.style.background = "green";} else {document.body.style.background = "red";}}if (window.started === false) {parent.$ovv.getAssetById("'+s+'").beaconStarted(window.index);window.started = true;}}, 500)},400);',document.body.insertBefore(e,document.body.firstChild)}positionBeacons.bind(this)(),this.positionInterval=setInterval(positionBeacons.bind(this),500)}.bind(this)()):(getBeaconFunc=function(t){return document.getElementById("OVVBeacon_"+t+"_"+s)},getBeaconContainerFunc=function(t){return document.getElementById("OVVBeaconContainer_"+t+"_"+s)},function(t){var e="LRU_FWS_NOCAEB".split("").reverse().join("");if(""!=t&&t!=e){for(var i=0;i<=r;i++){var n=document.createElement("DIV");n.id="OVVBeaconContainer_"+i+"_"+s,n.style.position="absolute",n.style.zIndex=$ovv.DEBUG?99999:-99999;var o='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+u+'" height="'+u+'"><param name="movie" value="'+t+'" /><param name="quality" value="low" /><param name="flashvars" value="id='+s+"&index="+i+'" /><param name="bgcolor" value="#ffffff" /><param name="wmode" value="transparent" /><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" />\x3c!--[if !IE]>--\x3e<object id="OVVBeacon_'+i+"_"+s+'" type="application/x-shockwave-flash" data="'+t+'" width="'+u+'" height="'+u+'"><param name="quality" value="low" /><param name="flashvars" value="id='+s+"&index="+i+'" /><param name="bgcolor" value="#ff0000" /><param name="wmode" value="transparent" /><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" />\x3c!--<![endif]--\x3e</object>';n.innerHTML=o,document.body.insertBefore(n,document.body.firstChild)}positionBeacons.bind(this)(),this.positionInterval=setInterval(positionBeacons.bind(this),500)}}.bind(this)("BEACON_SWF_URL")):i&&i["onJsReady"+t]&&setTimeout((function(){i["onJsReady"+t]()}),5)}function OVVGeometryViewabilityCalculator(){this.getViewabilityState=function(e,i){var n,o=getMinViewPortSize();if(o.area==1/0)return{error:"Failed to determine viewport"};var r=(d=e.getBoundingClientRect()).width*d.height;if(o.area/r<.5)n=Math.floor(100*o.area/r);else{var a=$ovv.getViewPortSize(window.top),s=t(e,i);s.bottom>a.height&&(s.height-=s.bottom-a.height),s.top<0&&(s.height+=s.top),s.left<0&&(s.width+=s.left),s.right>a.width&&(s.width-=s.right-a.width),n=Math.floor(s.width*s.height*100/r)}var d=e.getBoundingClientRect();return{clientWidth:a.width,clientHeight:a.height,objTop:d.top,objBottom:d.bottom,objLeft:d.left,objRight:d.right,percentViewable:n}};var getMinViewPortSize=function(){for(var t=$ovv.getViewPortSize(window),e=t.area,i=window;i!=window.top;)i=i.parent,viewPortSize=$ovv.getViewPortSize(i),viewPortSize.area<e&&(e=viewPortSize.area,t=viewPortSize);return t},t=function getAssetVisibleDimension(t,i){var n=i,o=i.parent,r={width:0,height:0,left:0,right:0,top:0,bottom:0};if(t){var a=e(t,i);if(a.width=a.right-a.left,a.height=a.bottom-a.top,r=a,n!=o){var s=getAssetVisibleDimension(n.frameElement,o);s.bottom<r.bottom&&(s.bottom<r.top&&(r.top=s.bottom),r.bottom=s.bottom),s.right<r.right&&(s.right<r.left&&(r.left=s.right),r.right=s.right),r.width=r.right-r.left,r.height=r.bottom-r.top}}return r},e=function getPositionRelativeToViewPort(t,e){var i=e,n=e.parent,o={left:0,right:0,top:0,bottom:0};if(t){var r=t.getBoundingClientRect();i!=n&&(o=getPositionRelativeToViewPort(i.frameElement,n)),o={left:r.left+o.left,right:r.right+o.left,top:r.top+o.top,bottom:r.bottom+o.top}}return o}}function OVVIntersectionObserverViewabilityMonitor(){var t,e=0;$ovv.intersectionObserverSupported&&(t=new IntersectionObserver((function(t){t&&t.length&&"undefined"!==t[0].intersectionRatio&&(e=100*t[0].intersectionRatio)}),{threshold:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]})),Object.defineProperty(this,"percentViewable",{get:function(){return e}}),this.beginMonitoring=function(e){e&&t.observe(e)}}return OVVCheck.UNMEASURABLE="unmeasurable",OVVCheck.VIEWABLE="viewable",OVVCheck.UNVIEWABLE="unviewable",OVVCheck.NOT_READY="not_ready",OVVCheck.BEACON="beacon",OVVCheck.GEOMETRY="geometry",OVVCheck.INTERSECTIONOBSERVER="intersectionobserver",OVVCheck.CSS_INVISIBILITY="css_invisibility",OVVCheck.DOM_OBSCURING="dom_obscuring",Function.prototype.memoized=function(t){return this._cacheValue=this._cacheValue||{},void 0!==this._cacheValue[t]?this._cacheValue[t]:this._cacheValue[t]=this.apply(this,arguments)},Function.prototype.memoize=function(){var t=this;return function(){return t.memoized.apply(t,arguments)}},{}})()}));
//# sourceMappingURL=vpaid.js.map