var VpaidVideoPlayer=function(){this.slot_=null,this.videoSlot_=null,this.eventsCallbacks_={},this.loadedTime_=new Date().getTime(),this.attributes_={companions:"",desiredBitrate:256,duration:10,expanded:!1,height:0,icons:"",linear:!0,remainingTime:10,skippableState:!1,viewMode:"normal",width:0,volume:1},this.quartileEvents_=[{event:"AdImpression",value:0},{event:"AdVideoStart",value:0},{event:"AdVideoFirstQuartile",value:25},{event:"AdVideoMidpoint",value:50},{event:"AdVideoThirdQuartile",value:75},{event:"AdVideoComplete",value:99}],this.nextQuartileIndex_=0,this.videoFormat_={Format:"",Url:"",Width:0,Height:0,BitRate:0},this.customEvent={event:"",link:""},this.vpaidData={vpaid_events:[this.customEvent]},this.currentVideo_=this.videoFormat_,this.parameters_={duration:0,videos:{HD:this.videoFormat_,MSD:this.videoFormat_,SD:this.videoFormat_},vpaid_data:this.vpaidData,click_url:""}};VpaidVideoPlayer.prototype.handshakeVersion=function(e){return"2.0"},VpaidVideoPlayer.prototype.initAd=function(e,t,i,n,o,r){this.attributes_.width=e,this.attributes_.height=t,this.attributes_.viewMode=i,this.attributes_.desiredBitrate=n,this.slot_=r.slot,this.videoSlot_=r.videoSlot,this.parameters_=JSON.parse(o.AdParameters),this.selectVideo_(),this.updateVideoSlot_(),this.initOVV(),this.videoSlot_.addEventListener("timeupdate",this.timeUpdateHandler_.bind(this),!1),this.videoSlot_.addEventListener("loadedmetadata",this.loadedMetadata_.bind(this),!1),this.videoSlot_.addEventListener("ended",this.stopAd.bind(this),!1),this.slot_.addEventListener("click",this.clickAd_.bind(this),!1),this.callEvent_("AdLoaded"),this.subscribeCustomEvents_(),this.callCustomEvents_()},VpaidVideoPlayer.prototype.initOVV=function(){var e=new OVV;for(var t in window.$ovv=window.$ovv||e,e)$ovv.hasOwnProperty(t)||($ovv[t]=e[t]);let i=new OVVAsset("OVVID",{geometryViewabilityCalculator:new OVVGeometryViewabilityCalculator},this.slot_);window.$ovv.addAsset(i)},VpaidVideoPlayer.prototype.subscribeCustomEvents_=function(){this.subscribe(this.vb_iab1,"vb_iab1",this),this.subscribe(this.vb_iab2,"vb_iab2",this)},VpaidVideoPlayer.prototype.callCustomEvents_=function(){this.callEvent_("vb_iab1"),this.callEvent_("vb_iab2")},VpaidVideoPlayer.prototype.isValidTime=function(e){return new Date().getTime()-this.loadedTime_>=e},VpaidVideoPlayer.prototype.vb_iab1_time_counter=0,VpaidVideoPlayer.prototype.vb_iab1=function(){if(this.isViewable()){if(VpaidVideoPlayer.prototype.vb_iab1_time_counter>=1e3){this.httpGet(this.getEventByKey("vb_iab1"));return}VpaidVideoPlayer.prototype.vb_iab1_time_counter+=50,window.setTimeout((function(){this.vb_iab1()}).bind(this),50)}else VpaidVideoPlayer.prototype.vb_iab1_time_counter=0,window.setTimeout((function(){this.vb_iab1()}).bind(this),50)},VpaidVideoPlayer.prototype.vb_iab2_time_counter=0,VpaidVideoPlayer.prototype.vb_iab2=function(){if(this.isValidTime(2e3)&&this.isViewable()){if(VpaidVideoPlayer.prototype.vb_iab2_time_counter>=2e3){this.httpGet(this.getEventByKey("vb_iab2"));return}VpaidVideoPlayer.prototype.vb_iab2_time_counter+=50,window.setTimeout((function(){this.vb_iab2()}).bind(this),50)}else VpaidVideoPlayer.prototype.vb_iab2_time_counter=0,window.setTimeout((function(){this.vb_iab2()}).bind(this),50)},VpaidVideoPlayer.prototype.isPlaying=function(){return this.videoSlot_.currentTime>0&&!this.videoSlot_.paused&&!this.videoSlot_.ended},VpaidVideoPlayer.prototype.isViewable=function(){return $ovv.asset.checkViewability().viewabilityState===OVVCheck.VIEWABLE},VpaidVideoPlayer.prototype.getEventByKey=function(e){for(var t=0;t<this.parameters_.vpaid_data.vpaid_events.length;t++)if(this.parameters_.vpaid_data.vpaid_events[t].event===e)return this.parameters_.vpaid_data.vpaid_events[t]},VpaidVideoPlayer.prototype.httpGet=function(e){var t=new XMLHttpRequest;t.open("GET",e.link,!0),t.send(null)},VpaidVideoPlayer.prototype.clickAd_=function(){this.httpGet(this.getEventByKey("click")),window.open(this.parameters_.vpaid_data.click_url,"_blank"),this.callEvent_("AdClickThru")},VpaidVideoPlayer.prototype.loadedMetadata_=function(){this.attributes_.duration=this.videoSlot_.duration,this.callEvent_("AdDurationChange")},VpaidVideoPlayer.prototype.timeUpdateHandler_=function(){if(!(this.nextQuartileIndex_>=this.quartileEvents_.length)){if(100*this.videoSlot_.currentTime/this.videoSlot_.duration>=this.quartileEvents_[this.nextQuartileIndex_].value){var e=this.quartileEvents_[this.nextQuartileIndex_].event;(void 0!==this.eventsCallbacks_[e]||"AdImpression"!==e)&&this.eventsCallbacks_[e](),this.nextQuartileIndex_+=1}this.videoSlot_.duration>0&&(this.attributes_.remainingTime=this.videoSlot_.duration-this.videoSlot_.currentTime)}},VpaidVideoPlayer.prototype.updateVideoSlot_=function(){null==this.videoSlot_&&(this.videoSlot_=document.createElement("video"),this.slot_.appendChild(this.videoSlot_)),this.updateVideoPlayerSize_(),this.videoSlot_.setAttribute("src",this.currentVideo_.Url)},VpaidVideoPlayer.prototype.selectVideo_=function(){if(480>this.getAdWidth()){this.setCurrentVideo_("MSD");return}if(960>this.getAdWidth()){this.setCurrentVideo_("SD");return}this.setCurrentVideo_("HD")},VpaidVideoPlayer.prototype.setCurrentVideo_=function(e){this.currentVideo_=this.parameters_.videos[e]},VpaidVideoPlayer.prototype.updateVideoPlayerSize_=function(){this.videoSlot_.setAttribute("width",this.attributes_.width),this.videoSlot_.setAttribute("height",this.attributes_.height)},VpaidVideoPlayer.prototype.startAd=function(){this.videoSlot_.play(),this.callEvent_("AdStarted")},VpaidVideoPlayer.prototype.stopAd=function(){setTimeout(this.callEvent_.bind(this),75,["AdStopped"])},VpaidVideoPlayer.prototype.resizeAd=function(e,t,i){this.attributes_.width=e,this.attributes_.height=t,this.attributes_.viewMode=i,this.updateVideoPlayerSize_(),this.callEvent_("AdSizeChange")},VpaidVideoPlayer.prototype.pauseAd=function(){this.videoSlot_.pause(),this.callEvent_("AdPaused")},VpaidVideoPlayer.prototype.resumeAd=function(){this.videoSlot_.play(),this.callEvent_("AdPlaying")},VpaidVideoPlayer.prototype.expandAd=function(){this.attributes_.expanded=!0,this.callEvent_("AdExpanded")},VpaidVideoPlayer.prototype.collapseAd=function(){this.attributes_.expanded=!1},VpaidVideoPlayer.prototype.skipAd=function(){this.attributes_.skippableState&&this.callEvent_("AdSkipped")},VpaidVideoPlayer.prototype.subscribe=function(e,t,i){var n=e.bind(i);this.eventsCallbacks_[t]=n},VpaidVideoPlayer.prototype.unsubscribe=function(e){this.eventsCallbacks_[e]=null},VpaidVideoPlayer.prototype.getAdLinear=function(){return this.attributes_.linear},VpaidVideoPlayer.prototype.getAdWidth=function(){return this.attributes_.width},VpaidVideoPlayer.prototype.getAdHeight=function(){return this.attributes_.height},VpaidVideoPlayer.prototype.getAdExpanded=function(){return this.attributes_.expanded},VpaidVideoPlayer.prototype.getAdSkippableState=function(){return this.attributes_.skippableState},VpaidVideoPlayer.prototype.getAdRemainingTime=function(){return this.attributes_.remainingTime},VpaidVideoPlayer.prototype.getAdDuration=function(){return this.attributes_.duration},VpaidVideoPlayer.prototype.getAdVolume=function(){return this.attributes_.volume},VpaidVideoPlayer.prototype.setAdVolume=function(e){this.attributes_.volume=e,this.callEvent_("AdVolumeChange")},VpaidVideoPlayer.prototype.getAdCompanions=function(){return this.attributes_.companions},VpaidVideoPlayer.prototype.getAdIcons=function(){return this.attributes_.icons},VpaidVideoPlayer.prototype.log=function(e){console.log(e)},VpaidVideoPlayer.prototype.callEvent_=function(e){e in this.eventsCallbacks_&&this.eventsCallbacks_[e]()};var getVPAIDAd=function(){return new VpaidVideoPlayer};function OVV(){this.DEBUG=!1,this.asset=null,this.positionInterval,this.userAgent=window.testOvvConfig&&window.testOvvConfig.userAgent?window.testOvvConfig.userAgent:navigator.userAgent,this.servingScenarioEnum={OnPage:1,SameDomainIframe:2,CrossDomainIframe:3},this.intersectionObserverSupported=!!window.IntersectionObserver,this.servingScenario=function e(t){try{if(window.top==window)return t.OnPage;for(var i=window;i.parent!=i;){if(i.parent.document.domain!=i.document.domain)return t.CrossDomainIframe;i=i.parent}return t.SameDomainIframe}catch(n){}return t.CrossDomainIframe}(this.servingScenarioEnum),this.IN_IFRAME=this.servingScenario!=this.servingScenarioEnum.OnPage,this.IN_XD_IFRAME=this.servingScenario==this.servingScenarioEnum.CrossDomainIframe,this.geometrySupported=!this.IN_XD_IFRAME;var e=new OVVBrowser(this.userAgent);this.browser=e.getBrowser(),this.browserIDEnum=e.getBrowserIDEnum(),this.interval=1,this.releaseVersion="OVVRELEASEVERSION",this.buildVersion="OVVBUILDVERSION";var t={},i=[],n=[];this.addAsset=function(e){t.hasOwnProperty(e.getId())||(t[e.getId()]=e,this.asset=e)},this.removeAsset=function(e){delete t[e.getId()]},this.getAssetById=function(e){return t[e]},this.getAds=function(){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},this.subscribe=function(e,t,o,s){if(s)for(key in i[t])i[t][key]&&r(i[t][key].eventName,e)&&a(function(){o(t,i[t][key])});for(key in e)n[e[key]+t]||(n[e[key]+t]=[]),n[e[key]+t].push({Func:o})},this.publish=function(e,t,r){var s={eventName:e,eventTime:o(),ovvArgs:r};if(i[t]||(i[t]=[]),i[t].length<1e3&&i[t].push(s),e&&t&&n[e+t]instanceof Array)for(var d=0;d<n[e+t].length;d++){var l=n[e+t][d];l&&l.Func&&"function"==typeof l.Func&&a(function(){l.Func(t,s)})}},this.getAllReceivedEvents=function(e){return i[e]},this.getViewPortSize=function(e){var t={width:1/0,height:1/0,area:1/0};return!isNaN(e.document.body.clientWidth)&&e.document.body.clientWidth>0&&(t.width=e.document.body.clientWidth),!isNaN(e.document.body.clientHeight)&&e.document.body.clientHeight>0&&(t.height=e.document.body.clientHeight),e.document.documentElement&&e.document.documentElement.clientWidth&&!isNaN(e.document.documentElement.clientWidth)&&(t.width=e.document.documentElement.clientWidth),e.document.documentElement&&e.document.documentElement.clientHeight&&!isNaN(e.document.documentElement.clientHeight)&&(t.height=e.document.documentElement.clientHeight),e.innerWidth&&!isNaN(e.innerWidth)&&(t.width=Math.min(t.width,e.innerWidth)),e.innerHeight&&!isNaN(e.innerHeight)&&(t.height=Math.min(t.height,e.innerHeight)),t.area=t.height*t.width,t};var o=function(){return Date.now?Date.now():new Date().getTime()},r=function(e,t){for(var i=0;i<t.length;i++)if(t[i]===e)return!0;return!1},a=function(e){try{var t=e();return void 0===t||t}catch(i){return!1}}}function OVVCheck(){this.clientHeight=-1,this.clientWidth=-1,this.error="",this.focus=null,this.fps=-1,this.id="",this.beaconsSupported=null,this.geometrySupported=null,this.geometryViewabilityState="",this.beaconViewabilityState="",this.cssViewabilityState="",this.domViewabilityState="",this.technique="",this.beacons=[],this.inIframe=null,this.objBottom=-1,this.objLeft=-1,this.objRight=-1,this.objTop=-1,this.percentViewable=-1,this.percentObscured=0,this.viewabilityState=""}function OVVBrowser(e){var t,i,n,o={MSIE:1,Firefox:2,Chrome:3,Opera:4,safari:5},r=(t=e,i="(Windows NT )",n=[{id:4,name:"Opera",brRegex:"OPR|Opera",verRegex:"(OPR/|Version/)"},{id:1,name:"MSIE",brRegex:"MSIE|Trident/7.*rv:11|rv:11.*Trident/7",verRegex:"(MSIE |rv:)"},{id:2,name:"Firefox",brRegex:"Firefox",verRegex:"Firefox/"},{id:3,name:"Chrome",brRegex:"Chrome",verRegex:"Chrome/"},{id:5,name:"Safari",brRegex:"Safari|(OS |OS X )[0-9].*AppleWebKit",verRegex:"Version/"}],function(){for(var e={ID:0,name:"",version:""},o=t,r=0;r<n.length;r++)if(null!=o.match(RegExp(n[r].brRegex))){if(e.ID=n[r].id,e.name=n[r].name,null==n[r].verRegex)break;var a=o.match(RegExp(n[r].verRegex+"[0-9]*"));if(null!=a){var s=a[0].match(RegExp(n[r].verRegex));e.version=a[0].replace(s[0],"")}var d=o.match(RegExp(i+"[0-9\\.]*"));null!=d&&(e.os=d[0]);break}return e}());this.getBrowser=function(){return r},this.getBrowserIDEnum=function(){return o}}function OVVBeaconSupportCheck(){var e=new OVVBrowser($ovv.userAgent),t=e.getBrowser(),i=e.getBrowserIDEnum();this.supportsBeacons=function(){var e=t.ID==i.MSIE,n=t.version>=11,o=t.os?t.os.split(" "):[0],r=o[o.length-1];return!e||n&&r>=6.3}}function OVVAsset(e,t,i){var n,o,r=Math.sqrt(2),a=e,s=0,d=$ovv.DEBUG?20:1,l=t.geometryViewabilityCalculator,h=function(){return null},u=function(){return null},c=new OVVBeaconSupportCheck;this.checkViewability=function(){var e=new OVVCheck;if(e.id=a,e.inIframe=$ovv.IN_IFRAME,e.geometrySupported=$ovv.geometrySupported,e.focus=B(),!i)return e.error="Player not found!",e;if($ovv.intersectionObserverSupported)return e.technique=OVVCheck.INTERSECTIONOBSERVER,f(e,i),e.viewabilityState=e.percentViewable>=50?OVVCheck.VIEWABLE:OVVCheck.UNVIEWABLE,e;if(!0===p(e,i)){if(!$ovv.DEBUG)return e;e.cssViewabilityState=OVVCheck.UNVIEWABLE}if(!0===V(e,i)){if(!$ovv.DEBUG)return e;e.domViewabilityState=OVVCheck.UNVIEWABLE}if(!c.supportsBeacons()&&!1===e.geometrySupported&&(e.viewabilityState=OVVCheck.UNMEASURABLE,!$ovv.DEBUG))return e;if(e.geometrySupported){if(e.technique=OVVCheck.GEOMETRY,v(e,i),e.viewabilityState=e.percentViewable>=50?OVVCheck.VIEWABLE:OVVCheck.UNVIEWABLE,!$ovv.DEBUG)return e;e.geometryViewabilityState=e.viewabilityState}var t=S(0),n=C(0);if(t&&t.isViewable&&n){var o=E(n)&&t.isViewable();e.beaconsSupported=!o}else e.beaconsSupported=!1;if(y()){if(e.beaconsSupported){e.technique=OVVCheck.BEACON;var r=m(e);null===r?(e.viewabilityState=OVVCheck.UNMEASURABLE,$ovv.DEBUG&&(e.beaconViewabilityState=OVVCheck.UNMEASURABLE)):(e.viewabilityState=r?OVVCheck.VIEWABLE:OVVCheck.UNVIEWABLE,$ovv.DEBUG&&(e.beaconViewabilityState=r?OVVCheck.VIEWABLE:OVVCheck.UNVIEWABLE))}else e.viewabilityState=OVVCheck.UNMEASURABLE}else e.technique=OVVCheck.BEACON,e.viewabilityState=OVVCheck.NOT_READY;if($ovv.DEBUG){if(e.technique="",null===e.geometryViewabilityState&&null===e.beaconViewabilityState)e.viewabilityState=OVVCheck.UNMEASURABLE;else{var s=e.beaconViewabilityState===OVVCheck.VIEWABLE,d=e.cssViewabilityState===OVVCheck.VIEWABLE,l=e.domViewabilityState===OVVCheck.VIEWABLE,h=e.geometryViewabilityState===OVVCheck.VIEWABLE;e.viewabilityState=d||l||s||h?OVVCheck.VIEWABLE:OVVCheck.UNVIEWABLE}}return e},this.beaconStarted=function(t){$ovv.DEBUG&&S(t).debug&&S(t).debug(),0!==t&&(s++,y()&&i["onJsReady"+e]())},this.dispose=function(){for(var e=1;e<=13;e++){var t=C(e);t&&(delete s[e],t.parentElement.removeChild(t))}clearInterval(window.$ovv.positionInterval),window.$ovv.removeAsset(this)},this.getId=function(){return a};var p=function(e,t){var i=window.getComputedStyle(t,null),n=i.getPropertyValue("visibility"),o=i.getPropertyValue("display");return("hidden"==n||"none"==o)&&(e.technique=OVVCheck.CSS_INVISIBILITY,e.viewabilityState=OVVCheck.UNVIEWABLE,!0)},V=function(e,t){var i=t.getBoundingClientRect(),n=i.left+12,o=i.right-12,r=i.top+12,a=i.bottom-12,s=Math.floor(i.left+i.width/2),d=Math.floor(i.top+i.height/2),l=[{x:n,y:r},{x:s,y:r},{x:o,y:r},{x:n,y:d},{x:s,y:d},{x:o,y:d},{x:n,y:a},{x:s,y:a},{x:o,y:a}];for(var h in l)if(l[h]&&l[h].x>=0&&l[h].y>=0&&null!=(elem=document.elementFromPoint(l[h].x,l[h].y))&&elem!=t&&!t.contains(elem)&&(overlappingArea=b(i,elem.getBoundingClientRect()))>0&&(e.percentObscured=100*b(i,elem.getBoundingClientRect()),e.percentObscured>50))return e.percentViewable=100-e.percentObscured,e.technique=OVVCheck.DOM_OBSCURING,e.viewabilityState=OVVCheck.UNVIEWABLE,!0;return!1},b=function(e,t){var i,n=e.width*e.height;return Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left))*Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top))/n},v=function(e,t){e.percentObscured=e.percentObscured||0;var i=l.getViewabilityState(t,window);return i.error||(e.clientWidth=i.clientWidth,e.clientHeight=i.clientHeight,e.percentViewable=i.percentViewable-e.percentObscured,e.objTop=i.objTop,e.objBottom=i.objBottom,e.objLeft=i.objLeft,e.objRight=i.objRight),i},m=function(e){if(!y())return null;var t=0,n=0,o=0,r=0;e.beacons=Array(13);var a=i.getClientRects?i.getClientRects()[0]:{top:-1,bottom:-1,left:-1,right:-1};e.objTop=a.top,e.objBottom=a.bottom,e.objLeft=a.left,e.objRight=a.right;for(var s=0;s<=13;s++)if(0!==s){var d=S(s),l=C(s),h=d.isViewable(),u=E(l);if(e.beacons[s]=h&&u,h)switch(t++,s){case 2:case 3:case 4:case 5:n++;break;case 6:case 7:case 8:case 9:o++;break;case 10:case 11:case 12:case 13:r++}}if(13===t)return!0;var c=e.beacons;return!1===c[1]?(r>=3||o>=3||n>=3)&&null:!0===c[1]&&(!0===c[2]&&!0===c[3]||!0===c[2]&&!0===c[4]||!0===c[3]&&!0===c[5]||!0===c[4]&&!0===c[5])||!0===c[1]&&4==o||(!!c[2]&&!!c[5]&&!(c[6]&&c[10]&&c[1]&&c[13]&&c[9])||!!c[4]&&!!c[3]&&!(c[8]&&c[12]&&c[1]&&c[11]&&c[7]))&&null},f=function(e,t){e.percentViewable=o.percentViewable;var i=t.getClientRects?t.getClientRects()[0]:{top:-1,bottom:-1,left:-1,right:-1};if(e.objTop=i.top,e.objBottom=i.bottom,e.objLeft=i.left,e.objRight=i.right,e.geometrySupported){var n=$ovv.getViewPortSize(window);e.clientWidth=n.width,e.clientHeight=n.height}},y=function(){return!!i&&13===s},g=function(e){var t="LRU_FWS_NOCAEB".split("").reverse().join("");if(""!=e&&e!=t){for(var i=0;i<=13;i++){var n=document.createElement("DIV");n.id="OVVBeaconContainer_"+i+"_"+a,n.style.position="absolute",n.style.zIndex=$ovv.DEBUG?99999:-99999;var o='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+d+'" height="'+d+'"><param name="movie" value="'+e+'" /><param name="quality" value="low" /><param name="flashvars" value="id='+a+"&index="+i+'" /><param name="bgcolor" value="#ffffff" /><param name="wmode" value="transparent" /><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><!--[if !IE]>--><object id="OVVBeacon_'+i+"_"+a+'" type="application/x-shockwave-flash" data="'+e+'" width="'+d+'" height="'+d+'"><param name="quality" value="low" /><param name="flashvars" value="id='+a+"&index="+i+'" /><param name="bgcolor" value="#ff0000" /><param name="wmode" value="transparent" /><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><!--<![endif]--></object>';n.innerHTML=o,document.body.insertBefore(n,document.body.firstChild)}w.bind(this)(),this.positionInterval=setInterval(w.bind(this),500)}},$=function(){for(var e=0;e<=13;e++){var t=document.createElement("iframe");t.name=t.id="OVVFrame_"+a+"_"+e,t.width=$ovv.DEBUG?20:1,t.height=$ovv.DEBUG?20:1,t.frameBorder=0,t.style.position="absolute",t.style.zIndex=$ovv.DEBUG?99999:-99999,t.src="javascript: window.isInViewArea = undefined; window.wasInViewArea = false; window.isInView = undefined; window.wasViewed = false; window.started = false; window.index = "+e+';window.isViewable = function() { return window.isInView; }; var cnt = 0; setTimeout(function() {var span = document.createElement("span");span.id = "ad1";document.body.insertBefore(span, document.body.firstChild);},300);setTimeout(function() {setInterval(function() { ad1 = document.getElementById("ad1");ad1.innerHTML = window.mozPaintCount > cnt ? "In View" : "Out of View";var paintCount = window.mozPaintCount; window.isInView = (paintCount>cnt); cnt = paintCount; if (parent.$ovv.DEBUG == true) {if(window.isInView === true){document.body.style.background = "green";} else {document.body.style.background = "red";}}if (window.started === false) {parent.$ovv.getAssetById("'+a+'").beaconStarted(window.index);window.started = true;}}, 500)},400);',document.body.insertBefore(t,document.body.firstChild)}w.bind(this)(),this.positionInterval=setInterval(w.bind(this),500)},w=function(){if(y()){var e=i.getClientRects()[0];if(!n||!e||n.left!==e.left||n.right!==e.right||n.top!==e.top||n.bottom!==e.bottom){n=e;for(var t=e.right-e.left,o=e.bottom-e.top,a=t/(1+r),s=o/(1+r),l=t/r,h=o/r,u=0;u<=13;u++){var c=Math.round(5*Math.random()),p=e.left+document.body.scrollLeft,V=e.top+document.body.scrollTop;switch(u){case 0:p=-1e5,V=-1e5;break;case 1:p+=(t-d)/2+c,V+=(o-d)/2+c;break;case 2:p+=c,V+=c;break;case 3:V+=c,p+=t-d-c;break;case 4:p+=c,V+=o-d-c;break;case 5:p+=t-d-c,V+=o-d-c;break;case 6:p+=(t-l)/2+c,V+=(o-h)/2+c;break;case 7:p+=(t-l)/2+l-c,V+=(o-h)/2+c;break;case 8:p+=(t-l)/2+c,V+=(o-h)/2+h-c;break;case 9:p+=(t-l)/2+l-c,V+=(o-h)/2+h-c;break;case 10:p+=(t-a)/2+c,V+=(o-s)/2+c;break;case 11:p+=(t-a)/2+a-c,V+=(o-s)/2+c;break;case 12:p+=(t-a)/2+c,V+=(o-s)/2+s-c;break;case 13:p+=(t-a)/2+a-c,V+=(o-s)/2+s-c}u>=6&&(p-=d/2,V-=d/2),p=Math.round(p),V=Math.round(V);var b=C(u);b.style.left=p+"px",b.style.top=V+"px"}}}},E=function(e){if(!e)return!1;var t=Math.max(document.body.clientWidth,window.innerWidth),i=Math.max(document.body.clientHeight,window.innerHeight),n=e.getClientRects()[0];return n.top<i&&n.bottom>0&&n.left<t&&n.right>0},S=(function(e){return h(e)}).memoize(),_=function(e){return document.getElementById("OVVBeacon_"+e+"_"+a)},A=function(e){var t=document.getElementById("OVVFrame_"+a+"_"+e),i=null;return t&&(i=t.contentWindow),i},C=(function(e){return u(e)}).memoize(),O=function(e){return document.getElementById("OVVBeaconContainer_"+e+"_"+a)},I=function(e){return document.getElementById("OVVFrame_"+a+"_"+e)},B=function(){return("undefined"===document.hidden||!0!==document.hidden)&&(!!$ovv.IN_XD_IFRAME||!window.top.document.hasFocus||window.top.document.hasFocus())};$ovv.intersectionObserverSupported?(o=new OVVIntersectionObserverViewabilityMonitor,i&&(o.beginMonitoring(i),i["onJsReady"+e]&&setTimeout(function(){i["onJsReady"+e]()},5))):!1==$ovv.geometrySupported||$ovv.DEBUG?$ovv.browser.ID===$ovv.browserIDEnum.Firefox?(h=A,u=I,$.bind(this)()):(h=_,u=O,g.bind(this)("BEACON_SWF_URL")):i&&i["onJsReady"+e]&&setTimeout(function(){i["onJsReady"+e]()},5)}function OVVGeometryViewabilityCalculator(){this.getViewabilityState=function(i,n){var o,r=e();if(r.area==1/0)return{error:"Failed to determine viewport"};var a=i.getBoundingClientRect(),s=a.width*a.height;if(r.area/s<.5)o=Math.floor(100*r.area/s);else{var d=$ovv.getViewPortSize(window.top),l=t(i,n);l.bottom>d.height&&(l.height-=l.bottom-d.height),l.top<0&&(l.height+=l.top),l.left<0&&(l.width+=l.left),l.right>d.width&&(l.width-=l.right-d.width),o=Math.floor(100*(l.width*l.height)/s)}var a=i.getBoundingClientRect();return{clientWidth:d.width,clientHeight:d.height,objTop:a.top,objBottom:a.bottom,objLeft:a.left,objRight:a.right,percentViewable:o}};var e=function(){for(var e=$ovv.getViewPortSize(window),t=e.area,i=window;i!=window.top;)i=i.parent,(viewPortSize=$ovv.getViewPortSize(i)).area<t&&(t=viewPortSize.area,e=viewPortSize);return e},t=function(e,n){var o=n,r=n.parent,a={width:0,height:0,left:0,right:0,top:0,bottom:0};if(e){var s=i(e,n);if(s.width=s.right-s.left,s.height=s.bottom-s.top,a=s,o!=r){var d=t(o.frameElement,r);d.bottom<a.bottom&&(d.bottom<a.top&&(a.top=d.bottom),a.bottom=d.bottom),d.right<a.right&&(d.right<a.left&&(a.left=d.right),a.right=d.right),a.width=a.right-a.left,a.height=a.bottom-a.top}}return a},i=function(e,t){var n=t,o=t.parent,r={left:0,right:0,top:0,bottom:0};if(e){var a=e.getBoundingClientRect();n!=o&&(r=i(n.frameElement,o)),r={left:a.left+r.left,right:a.right+r.left,top:a.top+r.top,bottom:a.bottom+r.top}}return r}}function OVVIntersectionObserverViewabilityMonitor(){var e,t=0;$ovv.intersectionObserverSupported&&(e=new IntersectionObserver(function e(i){i&&i.length&&"undefined"!==i[0].intersectionRatio&&(t=100*i[0].intersectionRatio)},{threshold:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]})),Object.defineProperty(this,"percentViewable",{get:function(){return t}}),this.beginMonitoring=function(t){t&&e.observe(t)}}OVVCheck.UNMEASURABLE="unmeasurable",OVVCheck.VIEWABLE="viewable",OVVCheck.UNVIEWABLE="unviewable",OVVCheck.NOT_READY="not_ready",OVVCheck.BEACON="beacon",OVVCheck.GEOMETRY="geometry",OVVCheck.INTERSECTIONOBSERVER="intersectionobserver",OVVCheck.CSS_INVISIBILITY="css_invisibility",OVVCheck.DOM_OBSCURING="dom_obscuring",Function.prototype.memoized=function(e){return this._cacheValue=this._cacheValue||{},void 0!==this._cacheValue[e]?this._cacheValue[e]:this._cacheValue[e]=this.apply(this,arguments)},Function.prototype.memoize=function(){var e=this;return function(){return e.memoized.apply(e,arguments)}};
